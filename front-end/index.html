<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Weekend Panorama Temuco</title>
    <link rel="stylesheet" href="css/estiloindex.css" />
    <!-- CSS only -->
    <script src="javaScript/javaslogin.js"></script>
    
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />

  </head>

  <body>

    <div class="container-fluid"> 
      
      <div class="row">
        <div class="col-lg-10 col">
          <!--TITULO-->
          <div id="titulo">
            <h1><b> My Weekend Panorama Temuco </b></h1>
          </div>
        </div>
        <div class="col-lg-2 col">
          <!--BOTON-->
          <div id="sesion">
            <button type="button" style="font-size:19px;" title="Cerrar Sesión" onclick="logoutUser()" name="Sesion">
              Cerrar Sesión
            </button>
            
          </div>
        </div>
      </div>
      <div class="row" style="margin-top:30px">
        <div class="col-lg-4" >
          <h3 class="titulo">¿Con cuánto dinero cuentas?</h3>
        </div>
        <div class="col-lg-4">
          <div  class="input-group mb-3">
            <span id="filter" class="input-group-text">$</span>
            <input
              type="text"
              class="form-control"
              aria-label="Amount (to the nearest dollar)"
            />
          </div>
        </div>
        <div class="col-lg-4">
          <div id="panorama">
            <button type="button" id="filterb" onclick="filterByPrice()" title="Ver Panorama" name="Panorama">
              Ver mi Panorama
            </button>
          </div>
        </div>
      </div>
<!-----------------------TARJETA---------------------------->





      
<!-----------------------FIN TARJETA------------------------>

    </div>
    
    <div id="result" class="container; col-lg-3"  style="display:flex; gap:15px; justify-content:center;
    flex-wrap: wrap;padding-left: 0;margin-top:30px; height: 30%; width: 100%">   
     <script>
      function mostrartodo(){
      let result=document.getElementById("result");
      fetch('http://localhost:8080/filtrarlugar')
      .then(response => response.json())
      .then(json => {
        console.log(json);

        for(data of json){
         console.log(data)
          let nombrelugar=data.nombre_l; 
          let locationplace=data.ubicacion;
          let descripcionlugar=data.descripcion;
          let preciolugar=data.precio;
          let imglugar=data.img;

          let tarjeta="<div class='card'style='flex: 0 0 25%;text-align: center; height: 650px;'><div style='color:#65A4BE; background-color:white; font-size: 22px;' class='card-header'><b>$"+data.precio+"</b></div><img src='"+data.img+"' style=' max-height:290px; min-height:200px; height:30%;' class=card-img-top' alt='...'><div class='card-body'><h5 class='card-title'>"+data.nombre_l+"</h5><p class='card-text' style='text-align:justify;height: 65%;';> "+data.descripcion+"</p><a href='"+data.ubicacion+"' style='background-color:#0C8218; width:100%' class='btn btn-success'><b>VER MAPA</b></a></div></div>"

          



          //console.log(preciolugar);  
          let htmlContent=result.innerHTML        
          result.innerHTML=htmlContent+tarjeta
          
          
          /*let htmlcontent=result.innerHTML;
          result.innerHTML=htmlcontent+html*/
        }

      })}
      
      function filterByPrice(){
      let resultf=document.getElementById("filter").value;
      console.log("aca"+ resultf) 
      let url="'http://localhost:8080/filtrarlugar/"
      let resulturl=url+resultf+"'"
      console.log(resulturl)
      fetch(resulturl)
      .then(response => response.json())
      .then(json => {
        console.log("acá va el dato"+json);

        for(data of json){
         console.log(data)
      
          let nombrelugar=data.nombre_l; 
          let locationplace=data.ubicacion;
          let descripcionlugar=data.descripcion;
          let preciolugar=data.precio;
          let imglugar=data.img;

          let tarjeta="<div class='card'style='flex: 0 0 25%;text-align: center; height: 650px;'><div style='color:#65A4BE; background-color:white; font-size: 22px;' class='card-header'><b>$"+data.precio+"</b></div><img src='"+data.img+"' style=' max-height:290px; min-height:200px; height:30%;' class=card-img-top' alt='...'><div class='card-body'><h5 class='card-title'>"+data.nombre_l+"</h5><p class='card-text' style='text-align:justify;height: 65%;';> "+data.descripcion+"</p><a href='"+data.ubicacion+"' style='background-color:#0C8218; width:100%' class='btn btn-success'><b>VER MAPA</b></a></div></div>"

          



          //console.log(preciolugar);  
          let htmlContent=result.innerHTML        
          result.innerHTML=htmlContent+tarjeta
          
          
          /*let htmlcontent=result.innerHTML;
          result.innerHTML=htmlcontent+html*/
        }

      })}
      
     </script>

    <script>
    verifyIsLogin();
    mostrartodo();
    </script>
    
    </div>

  </body>
</html>
      